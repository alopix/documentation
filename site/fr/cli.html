<!DOCTYPE html>
<html lang="fr">
<head>
    <title>
        
Outils en ligne de commande

    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link type="text/css" rel="stylesheet" href="/static/css/bookwyrm.css">
    <link type="text/css" rel="stylesheet" href="/static/css/icons.css">
    <link type="text/css" rel="stylesheet" href="/static/css/bulma.min.css">

    <link rel="shortcut icon" type="image/x-icon" href="/static/images/favicon.ico">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Bookwyrm Documentation">
    <meta name="og:title" content="Bookwyrm Documentation">
    <meta name="twitter:description" content="Documentation for using and contributing to BookWyrm">
    <meta name="og:description" content="Documentation for using and contributing to BookWyrm">

    <meta name="twitter:image" content="">
    <meta name="og:image" content="">
    <meta name="twitter:image:alt" content="BookWyrm Logo">

    <meta charset="UTF-8">
</head>
<body>
<nav class="navbar container is-max-desktop" aria-label="main navigation">
    <div class="navbar-brand">
        <a class="navbar-item" href="https://joinbookwyrm.com/">
            <img class="image logo" src="/static/images/logo-small.png" alt="Go back to the homepage">
        </a>
    </div>

    <div class="navbar-menu" id="main-nav">
        <div class="navbar-start">
            <a href="https://joinbookwyrm.com/fr/instances" class="navbar-item">
                <span class="button is-success">Rejoindre</span>
            </a>
            <a href="https://joinbookwyrm.com/fr/get-involved" class="navbar-item">
                Comment s'impliquer ?
            </a>
            <a href="https://www.patreon.com/bookwyrm" class="navbar-item">
                Soutenir
            </a>
            <a href="https://github.com/bookwyrm-social/bookwyrm" class="navbar-item">
                Code
            </a>
            <a href="#" class="navbar-item is-active">
                Documentation
            </a>
        </div>
    </div>
    <div class="navbar-end">
        <div class="navbar-item">
            <div class="select">
                <select aria-label="Select a language" id="language_selection">
                    
                    <option value="" >English (US)</option>
                    
                    <option value="de/" >Deutsch</option>
                    
                    <option value="fr/" selected>Français</option>
                    
                    <option value="pt-br/" >Português do Brasil</option>
                    
                    <option value="ro/" >Română</option>
                    
              </select>
            </div>
        </div>
    </div>
</nav>

<div class="container is-max-desktop">
<section class="section">

    <header class="content block column is-offset-one-quarter pl-2">
        
<h1 class="title is-1">Outils en ligne de commande</h1>

    </header>
    <div class="columns">
	<nav class="menu column is-one-quarter mt-2">
            <h2 class="menu-label"><a href="/fr/">Welcome</a></h2>
            
            <h2 class="menu-label">Using BookWyrm</h2>
            <ul class="menu-list">
                
                <li>
                    <a href="/fr/posting-statuses.html" >Publication de statuts</a>
                </li>
                
                <li>
                    <a href="/fr/adding-books.html" >Adding Books</a>
                </li>
                
            </ul>
            
            <h2 class="menu-label">Running BookWyrm</h2>
            <ul class="menu-list">
                
                <li>
                    <a href="/fr/install-prod.html" >Installing in Production</a>
                </li>
                
                <li>
                    <a href="/fr/updating.html" >Updating Your Instance</a>
                </li>
                
                <li>
                    <a href="/fr/reverse-proxy.html" >Using a Reverse-Proxy</a>
                </li>
                
                <li>
                    <a href="/fr/moderation.html" >Moderation</a>
                </li>
                
                <li>
                    <a href="/fr/external-storage.html" >External Storage</a>
                </li>
                
                <li>
                    <a href="/fr/optional_features.html" >Optional features</a>
                </li>
                
                <li>
                    <a href="/fr/cli.html" class="is-active">Outils en ligne de commande</a>
                </li>
                
            </ul>
            
            <h2 class="menu-label">Contributing</h2>
            <ul class="menu-list">
                
                <li>
                    <a href="/fr/contributing.html" >Comment contribuer</a>
                </li>
                
                <li>
                    <a href="/fr/translation.html" >Translations</a>
                </li>
                
                <li>
                    <a href="/fr/install-dev.html" >Environnement de développement</a>
                </li>
                
                <li>
                    <a href="/fr/style_guide.html" >Style Guide</a>
                </li>
                
                <li>
                    <a href="/fr/debug_toolbar.html" >Django Debug Toolbar</a>
                </li>
                
            </ul>
            
            <h2 class="menu-label">Codebase</h2>
            <ul class="menu-list">
                
                <li>
                    <a href="/fr/activitypub.html" >ActivityPub</a>
                </li>
                
                <li>
                    <a href="/fr/permissions.html" >Permissions</a>
                </li>
                
            </ul>
            
        </nav>

        <div class="column">
            
<section class="block content">
    <p>Les développeur-e-s de BookWyrm et les gestionnaires d'une instance peuvent utiliser le script <code>bw-dev</code> pour des tâches courantes. Cela peut simplifier vos commandes en les rendant plus courtes, plus faciles à mémoriser et diminuer le risque d'erreur.</p>
<p>Une fois que vous avez installé Bookwyrm <a href="installing-in-production.html">en production</a> ou <a href="https://docs.joinbookwyrm.com/developer-environment.html#setting_up_the_developer_environment">en développement</a>, vous pouvez exécuter le script à partir de la ligne de commande avec <code>./bw-dev</code> suivi de la sous-commande que vous voulez exécuter.</p>
<h2>Raccourcis Docker</h2>
<h3>bash</h3>
<p>Ouvez une session interactive <code>bash</code> dans le conteneur docker <code>web</code>.</p>
<h3>build</h3>
<p>Équivalent à <code>docker-compose build</code>.</p>
<h3>dbshell</h3>
<p>Ouvrir un shell de base de donnée Postgres interactif. On espère que vous savez ce que vous faites.</p>
<h3>runweb args</h3>
<p>Exécuter une commande arbitraire (représentée ci-dessus par <code>args</code>) dans le conteneur <code>web</code>.</p>
<p>Équivalent à <code>docker-compose run --rm web</code>.</p>
<h3>service_ports_web args</h3>
<p>Exécuter une commande arbitraire dans le conteneur <code>web</code> (représenté ci-dessus par <code>args</code>) avec les ports exposés. Ceci est utile si vous voulez exécuter des tests <code>pdb</code> parce que <code>runweb</code> n'affiche pas l'invite de commande <code>pdb</code>.</p>
<p>Équivalent à <code>docker-compose run --rm web</code>.</p>
<h3>shell</h3>
<p>Ouvrir un shell Django interactif à l'intérieur du conteneur docker <code>web</code>. Cela sert à exécuter directement des commandes Django.</p>
<h3>up [args]</h3>
<p>Démarrer ou redémarrer des conteneurs Docker, en incluant optionnellement des arguments (représentés ci-dessus par <code>args</code>). Équivalent à <code>docker-compose up --build [args]</code></p>
<h2>Gérer la base de données</h2>
<h3>initdb</h3>
<p>Initialiser une base de données.</p>
<h3>makemigrations [appname migration number]</h3>
<p><em>Cette commande n'est pas disponible sur la branche de <code>production</code></em>.</p>
<p>Exécute la commande Django <code>makemigrations</code> à l'intérieur du conteneur Docker. Si vous avez changé la structure de la base de donnée dans une branche de développement, vous allez devoir exécuter cette commande pour que vos changements s'appliquent. Facultativement, vous pouvez préciser quelle migration exécuter, par exemple <code>./bw-dev makemigrations bookwyrm 0108</code></p>
<h3>migrate</h3>
<p>Exécute la commande Django <code>migrate</code> à l'intérieur de votre conteneur Docker. Il faut toujours faire ceci après <code>makemigrations</code>.</p>
<h3>resetdb</h3>
<p><em>Cette commande n'est pas disponible sur la branche de <code>production</code></em>.</p>
<p>Réinitialise la base de données. <strong>Cette commande va supprimer votre base de données Bookwyrm en entier</strong>, et va ensuite initialiser une nouvelle base de donnée et effectuer toutes les migrations. Vous devriez supprimer tous les fichiers de migration récents que vous ne voulez pas exécuter <em>avant</em> d'exécuter <code>resetdb</code>.</p>
<h2>Gérer une instance de Bookwyrm</h2>
<h3>collectstatic</h3>
<p>Migre les ressources statiques soit vers un conteneur Docker, soit vers un "compartiment" S3-compatible, dépendamment du contexte.</p>
<h3>generate_preview_images</h3>
<p>Génère un aperçu pour le site, les utilisateur-ice-s et les livres. Si vous avez une grande base de données, cela peut prendre un certain temps.</p>
<h3>generate_thumbnails</h3>
<p>Génère des vignettes pour les couvertures des livres.</p>
<h3>populate_streams args</h3>
<p>Re-populates Redis streams (user feeds). You will not usually need to run this unless there is an error that wipes out your user feeds for some reason. You can specify which stream using the <code>--stream</code> argument.</p>
<h3>populate_list_streams</h3>
<p>Re-populates Redis cache of lists. You will not usually need to run this unless there is an error that wipes out your users' lists for some reason.</p>
<h3>populate_suggestions</h3>
<p>Populate suggested users for all users. You may want to run this manually to refresh suggestions.</p>
<h3>restart_celery</h3>
<p>Restarts the <code>celery_worker</code> Docker container.</p>
<h3>update</h3>
<p>When there are changes to the <code>production</code> branch, you can update your instance without downtime.</p>
<p>This command <code>git pull</code>s the latest <code>production</code> branch updates, builds docker images if necessary, runs Django migrations, updates static files, and restarts all Docker containers.</p>
<h3>admin_code</h3>
<p>Gets the secret admin code used to register the inital admin user on a new BookWyrm instance.</p>
<h2>Setting up S3 compatible storage</h2>
<p>By default, BookWyrm uses local storage for static assets (favicon, default avatar, etc.), and media (user avatars, book covers, etc.), but you can use an external storage service to serve these files. BookWyrm uses django-storages to handle external storage, such as S3-compatible services, Apache Libcloud or SFTP.</p>
<p>See <a href="/external-storage.html">External Storage</a> for more information.</p>
<h3>copy_media_to_s3</h3>
<p>Migrate all uploaded media from an existing Bookwrym installation to an S3-compatible "bucket". Use for initial upload to an empty bucket.</p>
<h3>sync_media_to_s3</h3>
<p>Sync new or changed uploaded media from an existing Bookwrym installation to an S3-compatible "bucket". Use to ensure all local files are uploaded to an existing bucket.</p>
<h3>set_cors_to_s3 filename</h3>
<p>Copy a CORS rules JSON file to your S3 bucket, where <code>filename</code> is the name of your JSON file (e.g. <code>./bw-dev set_cors_to_s3 cors.json</code>)</p>
<h2>Development and testing</h2>
<p><em>These commands are not available on the <code>production</code> branch</em>.</p>
<h3>black</h3>
<p>BookWyrm uses the <a href="https://github.com/psf/black">Black</a> code formatter to keep the Python codebase consistent styled. Run <code>black</code> before committing your changes so the <code>pylint</code> task does not fail for your pull request and make you sad.</p>
<h3>prettier</h3>
<p>BookWyrm uses <a href="https://prettier.io/">Prettier</a> to keep the JavaScript codebase consistently styled. Run <code>prettier</code> before committing changes to scripts to automatically format your code.</p>
<h3>stylelint</h3>
<p>BookWyrm uses <a href="uhttps://stylelint.io/">Stylelint</a> to keep the CSS files consistently styled. Run <code>stylelintprettier</code> before committing changes to scripts to automatically format your code.</p>
<h3>formatters</h3>
<p>This command runs all code formatters (<code>black</code>, <code>prettier</code>, and <code>stylelint</code>) in one go.</p>
<h3>clean</h3>
<p>Remove all stopped Docker containers.</p>
<p>Equivalent to:</p>
<pre><code class="language-shell">docker-compose stop
docker-compose rm -f
</code></pre>
<h3>makemessages</h3>
<p>Creates message files for all translation strings. After you have run <code>makemessages</code> you need to run <code>compilemessages</code> to compile the translations. See <a href="https://docs.djangoproject.com/en/3.2/ref/django-admin/#makemessages">Django's makemessages</a>.</p>
<h3>compilemessages</h3>
<p>Compiles translation files. See <a href="https://docs.djangoproject.com/en/3.2/ref/django-admin/#compilemessages">Django's compilemessages</a>.</p>
<h3>pytest args</h3>
<p>Run tests with <code>pytest</code>.</p>
</section>

        </div>
    </div>
</section>
</div>

<footer id="contentinfo" class="footer">
    <div class="container is-max-desktop">
        <div class="columns">
            <div class="column content">
                <p>
                    <strong>BookWyrm</strong> est un logiciel collaboratif et anti-commercial maintenu par <a href='https://www.mousereeve.com/'>Mouse Reeve</a>.
                </p>
                <p>
                    Soutenir BookWyrm sur <a href='https://www.patreon.com/bookwyrm' target='_blank'>Patreon</a>.
                </p>
            </div>
            <div class="column">
                <h3 class="title is-6">Contribuer</h3>
                <p>
                    <a href="https://github.com/bookwyrm-social">BookWyrm sur GitHub</a>
                </p>
                <p>
                    <a href="https://github.com/bookwyrm-social/join-bookwyrm">Contribuer à cette page</a>
                </p>
                <p>
                    <a href="https://twitter.com/BookWyrmSocial" target="_blank">
                        <span class="icon icon-twitter"><span class="is-sr-only">Twitter</span></span>
                    </a>
                    <a href="https://tech.lgbt/@bookwyrm" target="_blank" rel="me">
                        <span class="icon icon-mastodon"><span class="is-sr-only">Mastodon</span></span>
                    </a>
                    <a href="https://www.patreon.com/bookwyrm" target="_blank">
                        <span class="icon icon-patreon"><span class="is-sr-only">Patreon</span></span>
                    </a>
                </p>
            </div>
            <div class="column">
                <h3 class="title is-6">En savoir plus</h3>
                <p>
                    <a href="https://docs.joinbookwyrm.com">Documentation</a>
                </p>
                <p>
                    <a href="mailto:mousereeve@riseup.net">Contact</a>
                </p>
                <p>
                    <a href="https://raw.githubusercontent.com/bookwyrm-social/join-bookwyrm/main/LICENSE.md">Licence</a>
                </p>
            </div>
        </div>
    </div>
</footer>

<script type="text/javascript">
    (function() {
        var languageSelector = document.getElementById("language_selection");
        languageSelector.onchange = function(event) {
            var current_locale = "fr/";
            var current_location = window.location.pathname;

            var locale_index = current_location.indexOf(current_locale);
            var new_location = "/" + event.target.value;

            if (locale_index) {
                new_location += current_location.slice(locale_index + current_locale.length);
            } else {
                new_location += current_location.slice(1);
            }

            window.location = new_location;
        }
    })()
</script>

</body>
</html>